<div class="card-top"
  [class.active]="mwBattleStateService.currentPlayer === playerInfo && attackingUnitGroup === unitGroup"
  [ngClass]="side === 'left' ? 'card-left' : 'card-right'"
  [class.inactive]="!unitGroup.turnsLeft && unitGroup.fightInfo.isAlive" [class.defeated]="!unitGroup.fightInfo.isAlive"
  (mouseenter)="onCardHover(true)" (mouseleave)="onCardHover(false)">

  <div class="card-wrapper">
    <div [style.background]="playerInfo.color"
      [class.current-group]="mwBattleStateService.currentPlayer === playerInfo && attackingUnitGroup === unitGroup"
      [class.hovered-enemy]="isCardHovered && isEnemyCard && canCurrentPlayerAttack" class="card">
      <div style="padding-bottom: 3px; font-weight: 500; white-space: nowrap;">
        {{ unitGroup.type.name }}
        ({{ unitGroup.count }})
      </div>
      <div style="font-size: 12px;">
        <div>
          <mw-ra-icon icon="spinning-sword"></mw-ra-icon>
          ({{unitGroup.turnsLeft}}/{{unitGroup.type.defaultTurnsPerRound}})
        </div>
        <div>
          <mw-ra-icon icon="sword" *ngIf="isGroupMelee; else rangedIcon"></mw-ra-icon>
          <ng-template #rangedIcon>
            <mw-ra-icon icon="crossbow"></mw-ra-icon>
          </ng-template>
          {{ unitGroup.type.baseStats.damageInfo.maxDamage * unitGroup.count }}
        </div>
        <div>
          <mw-ra-icon icon="feather-wing"></mw-ra-icon>
          {{ unitGroup.type.baseStats.speed }}<span [mwNumberModifier]="modsForUi.speed"></span>
        </div>
        <!-- this info will have to be updated -->
        <div>
          <mw-ra-icon icon="health"></mw-ra-icon>
          {{ unitGroup.type.baseStats.health * (unitGroup.count - 1) + (unitGroup.tailUnitHp ?? 0) }}
        </div>

      </div>

    </div>

    <!-- #4f52bd -->
    <!-- "linear-gradient(180deg, rgba(255,77,93,1) 0%, rgba(129,25,25,1) 100%)" -->
    <!-- rgb(201, 45, 45) -->
    <div class="abilities" [ngClass]="side === 'left' ? 'left' : 'right'">
      <div class="column-data">
        <mw-unit-group-spell *ngFor="let spell of spells" [spell]="spell" [owner]="unitGroup"
          [onCooldown]="unitGroup.fightInfo.spellsOnCooldown" [currentUnit]="attackingUnitGroup">
        </mw-unit-group-spell>
      </div>

      <div class="column-data">
        <mw-unit-group-buff *ngFor="let ability of effects" [buff]="ability"></mw-unit-group-buff>
      </div>
    </div>
  </div>

  <div class="portrait-container">
    <img src="../assets/{{unitGroup.type.mainPortraitUrl}}" class="portrait">
    <!-- can be customizable (on/off), also some highlight can be implemented -->
    <!--
            I'm not really sure if I want to have this bar. The latest value is what matters.
            To display heal value... still can be done with single value.

        -->
    <!-- rgb(80 89 165) -->
    <!-- <mw-value-bar class="health-bar" barStyle="static" [side]="side" color="rgb(201, 45, 45)" [currentValue]="unitGroup.count"
            [maxValue]="unitGroup.fightInfo.initialCount" [barHeight]="14">
        </mw-value-bar> -->
  </div>
</div>
